FROM ubuntu:22.04

# Install dependencies
RUN apt-get update && apt-get install -y \
    gcc \
    libtirpc-dev \
    libc6-dev \
    make \
    build-essential \
    && rm -rf /var/lib/apt/lists/*


# Set working directory
WORKDIR /app

# Copy your source code into the container
COPY vulnerability_example.c .

# Compile on container startup
RUN gcc -I/usr/include/tirpc -o vuln vulnerability_example.c -ltirpc -pthread -lrt

# Default command to run the compiled binary
CMD ["./vuln"]
